name: ğŸ”– Add status labels

on:
  workflow_run:
    workflows:
      - ğŸ› ï¸ Build + Test
      - ğŸ¨ Check SVG icon colors
      - âœ… Check PR Title
    types: [completed]

permissions:
  contents: read
  pull-requests: write

jobs:
  add-labels:
    runs-on: ubuntu-latest

    if: github.event.workflow_run.event == 'pull_request'

    steps:
      - name: ğŸ·ï¸ Manage label based on workflow result
        uses: material-extensions/add-labels@60e0e247ae419e306ff73fff891bbf9bcf7d85c4 # v1.0.5
        with:
          labels: |
            ${{ github.event.workflow_run.name == 'ğŸ› ï¸ Build + Test'          && 'âŒ build failed'   ||
                github.event.workflow_run.name == 'ğŸ¨ Check SVG icon colors' && 'ğŸ¨ wrong colors' ||
                github.event.workflow_run.name == 'âœ… Check PR Title'        && 'ğŸ“ invalid title'  }}

          action: ${{ github.event.workflow_run.conclusion == 'failure' && 'add' || 'remove' }}
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
